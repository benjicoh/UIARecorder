<Window x:Class="Recorder.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        Title="UI Automation Recorder" Height="700" Width="900"
        MinHeight="600" MinWidth="800"
        TextElement.Foreground="{DynamicResource MaterialDesignBody}"
        TextElement.FontWeight="Regular"
        TextElement.FontSize="13"
        TextOptions.TextFormattingMode="Ideal"
        TextOptions.TextRenderingMode="Auto"
        Background="{DynamicResource MaterialDesignPaper}"
        FontFamily="{DynamicResource MaterialDesignFont}">
    
    <Window.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <materialDesign:BundledTheme BaseTheme="Dark" PrimaryColor="DeepPurple" SecondaryColor="Lime" />
                <ResourceDictionary Source="pack://application:,,,/MaterialDesignThemes.Wpf;component/Themes/MaterialDesign3.Defaults.xaml" />
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </Window.Resources>

    <Grid Margin="16">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Title Bar -->
        <materialDesign:Card Grid.Row="0" Margin="0,0,0,16" materialDesign:ElevationAssist.Elevation="Dp4">
            <Grid Background="{DynamicResource MaterialDesignPaper}" Height="60">
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" VerticalAlignment="Center">
                    <materialDesign:PackIcon Kind="Record" Width="32" Height="32" 
                                           Foreground="{DynamicResource MaterialDesignBody}" 
                                           Margin="0,0,12,0"/>
                    <TextBlock Text="UI Automation Recorder" 
                               Style="{DynamicResource MaterialDesignHeadline4TextBlock}"
                               VerticalAlignment="Center"/>
                </StackPanel>
            </Grid>
        </materialDesign:Card>

        <!-- Recording Controls -->
        <materialDesign:Card Grid.Row="1" Margin="0,0,0,16" materialDesign:ElevationAssist.Elevation="Dp2">
            <StackPanel Margin="24">
                <TextBlock Text="Recording Controls" 
                           Style="{DynamicResource MaterialDesignHeadline6TextBlock}" 
                           Margin="0,0,0,16"/>
                
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    
                    <ToggleButton x:Name="StartStopToggleButton" Grid.Column="0" 
                                  Style="{StaticResource MaterialDesignActionToggleButton}"
                                  ToolTip="Start/Stop Recording"
                                  IsChecked="False"
                                  Click="StartStopToggleButton_Click"
                                  Width="56" Height="56"
                                  Margin="0,0,24,0">
                        <ToggleButton.Content>
                            <materialDesign:PackIcon Kind="Record" Width="24" Height="24"/>
                        </ToggleButton.Content>
                        <materialDesign:ToggleButtonAssist.OnContent>
                            <materialDesign:PackIcon Kind="Stop" Width="24" Height="24"/>
                        </materialDesign:ToggleButtonAssist.OnContent>
                    </ToggleButton>
                    
                    <StackPanel Grid.Column="1" VerticalAlignment="Center" Margin="0,0,24,0">
                        <TextBlock x:Name="RecordingStatusText" 
                                   Text="Ready" 
                                   Style="{DynamicResource MaterialDesignSubtitle1TextBlock}"/>
                        <TextBlock x:Name="RecordingTimeText" 
                                   Text="00:00" 
                                   Style="{DynamicResource MaterialDesignBody2TextBlock}"
                                   Opacity="0.7"/>
                    </StackPanel>

                    <CheckBox x:Name="RecordAudioCheckBox" Grid.Column="4" 
                              Content="Record Audio" 
                              IsChecked="True"
                              Style="{StaticResource MaterialDesignCheckBox}"
                              VerticalAlignment="Center"/>
                </Grid>
            </StackPanel>
        </materialDesign:Card>

        <!-- Target Selection -->
        <materialDesign:Card Grid.Row="2" Margin="0,0,0,16" materialDesign:ElevationAssist.Elevation="Dp2">
            <StackPanel Margin="24">
                <TextBlock Text="Recording Target" 
                           Style="{DynamicResource MaterialDesignHeadline6TextBlock}" 
                           Margin="0,0,0,16"/>
                
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <TextBlock Grid.Row="0" Grid.Column="0" Text="Target Type:" 
                               VerticalAlignment="Center" Margin="0,0,16,0"/>
                    <ComboBox x:Name="TargetTypeComboBox" Grid.Row="0" Grid.Column="1" 
                              SelectionChanged="TargetTypeComboBox_SelectionChanged"
                              Style="{StaticResource MaterialDesignComboBox}"
                              materialDesign:HintAssist.Hint="Select recording target"
                              Margin="0,0,0,8">
                        <ComboBoxItem Content="Entire Desktop" IsSelected="True"/>
                        <ComboBoxItem Content="Specific Window"/>
                        <ComboBoxItem Content="Custom Region"/>
                    </ComboBox>

                    <TextBlock x:Name="ProcessFilterLabel" Grid.Row="1" Grid.Column="0" 
                               Text="Process Filter:" 
                               VerticalAlignment="Center" Margin="0,8,16,0"
                               Visibility="Collapsed"/>
                    <TextBox x:Name="ProcessFilterTextBox" Grid.Row="1" Grid.Column="1" 
                             Visibility="Collapsed"
                             Style="{StaticResource MaterialDesignTextBox}"
                             materialDesign:HintAssist.Hint="Enter process names (e.g., notepad.exe, calculator.exe)"
                             Margin="0,8,16,0"/>
                    <Button x:Name="SelectWindowButton" Grid.Row="1" Grid.Column="2" 
                            Content="SELECT WINDOW" 
                            Click="SelectWindowButton_Click" 
                            Style="{StaticResource MaterialDesignOutlinedButton}"
                            Visibility="Collapsed"
                            Margin="0,8,0,0"/>
                </Grid>
            </StackPanel>
        </materialDesign:Card>

        <!-- Output Settings -->
        <materialDesign:Card Grid.Row="3" Margin="0,0,0,16" materialDesign:ElevationAssist.Elevation="Dp2">
            <StackPanel Margin="24">
                <TextBlock Text="Output Settings" 
                           Style="{DynamicResource MaterialDesignHeadline6TextBlock}" 
                           Margin="0,0,0,16"/>
                
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <TextBlock Grid.Row="0" Grid.Column="0" Text="Output Folder:" 
                               VerticalAlignment="Center" Margin="0,0,16,0"/>
                    <TextBox x:Name="OutputFolderTextBox" Grid.Row="0" Grid.Column="1" 
                             Text="generated_scripts/user_recording"
                             Style="{StaticResource MaterialDesignTextBox}"
                             materialDesign:HintAssist.Hint="Recording output directory"
                             Margin="0,0,16,0"/>
                    <Button Grid.Row="0" Grid.Column="2" 
                            Content="BROWSE" 
                            Click="BrowseOutputFolder_Click"
                            Style="{StaticResource MaterialDesignOutlinedButton}"/>

                    <CheckBox x:Name="TakeScreenshotsCheckBox" Grid.Row="1" Grid.Column="0" 
                              Grid.ColumnSpan="3"
                              Content="Take Element Screenshots" 
                              IsChecked="False"
                              Style="{StaticResource MaterialDesignCheckBox}"
                              Margin="0,16,0,0"/>
                </Grid>
            </StackPanel>
        </materialDesign:Card>

        <!-- Log Output -->
        <materialDesign:Card Grid.Row="4" materialDesign:ElevationAssist.Elevation="Dp2" Margin="0,0,0,16">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>
                
                <TextBlock Grid.Row="0" Text="Log Output" 
                           Style="{DynamicResource MaterialDesignHeadline6TextBlock}" 
                           Margin="24,24,24,16"/>
                
                <Border Grid.Row="1" Background="{DynamicResource MaterialDesignTextFieldBoxBackground}"
                        CornerRadius="4" Margin="24,0,24,24">
                    <ScrollViewer VerticalScrollBarVisibility="Auto" Margin="12">
                        <TextBox x:Name="LogTextBox" 
                                 MinHeight="150"
                                 IsReadOnly="True" 
                                 Background="Transparent"
                                 BorderThickness="0"
                                 FontFamily="Consolas" 
                                 FontSize="11" 
                                 TextWrapping="Wrap" 
                                 AcceptsReturn="True" 
                                 VerticalScrollBarVisibility="Auto"/>
                    </ScrollViewer>
                </Border>
            </Grid>
        </materialDesign:Card>

        <!-- Status Bar -->
        <materialDesign:Card Grid.Row="5" materialDesign:ElevationAssist.Elevation="Dp1">
            <Grid Height="40" Margin="24,0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                
                <TextBlock x:Name="StatusBarText" Grid.Column="0" 
                           Text="Ready" 
                           VerticalAlignment="Center"
                           Style="{DynamicResource MaterialDesignBody2TextBlock}"/>
                
                <StackPanel Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Center">
                    <materialDesign:PackIcon Kind="Keyboard" Width="16" Height="16" 
                                           Margin="0,0,8,0" Opacity="0.7"/>
                    <TextBlock Text="Alt+Shift+R to start/stop recording" 
                               Style="{DynamicResource MaterialDesignCaptionTextBlock}"
                               Opacity="0.7"/>
                </StackPanel>
            </Grid>
        </materialDesign:Card>
    </Grid>
</Window>